# 퀵대장(화물) 서비스 하반기 세부 계획

---

## 1. 프로젝트 목표 및 배경

기존 오토바이 퀵서비스 중심의 '퀵대장' 서비스에 **화물 운송 기능을 추가**하여, 소형 화물부터 1톤 트럭까지 포괄하는 **종합 퀵커머스 플랫폼으로 확장**하는 것을 목표로 합니다. 이를 통해 신규 수익원을 창출하고 서비스 경쟁력을 강화합니다.

### 추진 우선순위

- **1순위**: 고객사 청구를 위해서 빠르게 변경된 조회 조건으로 보여줍니다. (7월 30일 이내)
- **2순위**: 카카오 퀵에 화물을 추가합니다. (8월 13일 이내)

---

## 2. 서비스 정책 및 운영 방안

### 가. 기본 서비스 분류

총 2개의 타입으로 구분됩니다:

- **퀵**: 차량 종류가 오토바이인 경우
- **화물**: 차량 종류가 오토바이가 아닌 경우

### 나. 요금 정책

#### 퀵 서비스

- 카카오 원가를 보여줍니다
- 원가에서 할인을 하여 청구합니다

#### 화물 서비스

- 카카오 할인가를 보여줍니다
- 할인가에서 이용료율을 합쳐서 청구합니다

#### 할인율 및 이용료율

- **2025년 8월 31일까지**: 8%의 할인을 받습니다 (받은가격에 1.08을 곱한게 원가)
- **2025년 8월 31일까지**: 고객사의 할인/이용료는 5%
- **2025년 9월 1일부터**: 고객사의 할인/이용료는 3%

---

## 3. 주요 추진 계획

### 가. 화물 운송 기능 추가

#### 차량 옵션 확대

기존 오토바이 외 화물 운송을 위한 차량 옵션을 추가합니다:

- **오토바이**: 초소형, 소형, 중형 상품 운송 가능
- **짐받이 오토바이**: 초소형, 소형, 중형 상품 운송 가능 (미사용)
- **다마스**: 대형 상품 운송 전용
- **라보**: 대형 상품 운송 전용
- **1톤 트럭**: 대형 상품 운송 전용
- **승용차**: 대형 상품 운송용 (미사용 - 법률 이슈)

#### 상품 크기별 차량 매핑

- **초소형/소형/중형**: 오토바이만 선택 가능
- **대형(L)**: 화물 차량(다마스, 라보, 1톤) 선택 가능
- 화물 차량 선택 시 상품 크기는 `L(대형)`으로 자동 선택

#### 상하차 방법 선택 (대형 화물 전용)

대형 화물 선택 시, 출발지와 도착지 각각 **필수적으로 선택**:

- **기사담당**: 기사님이 상하차
- **고객직접**: 고객이 상하차
- **함께작업**: 고객과 기사님이 함께 상하차

#### 차등 요금 체계

상하차 방법 추가 요금표:
| 운송수단 | 고객직접: 고객이 상하차 | 함께작업: 같이 상하차 | 기사담당: 기사님이 상하차 |
| :--- | :--- | :--- | :--- |
| **다마스** | 0원 | 3,000원 | 6,000원 |
| **라보** | 0원 | 4,000원 | 8,000원 |
| **1톤 트럭** | 0원 | 8,000원 | 16,000원 |

_참고: 상하차 추가 요금에는 건별 할인율(3%/5%/8%)이 적용되지 않습니다._

### 나. 퀵 요청 기본 플로우

1. **상품 크기 선택**

   - 초소형(서류) | 소형(A4박스 1개) | 중형(A4박스 2개) | 대형(화물운송이 필요한 물품)

2. **차량 선택**

   - 상품 크기가 L이 아닌 경우: 오토바이 선택 가능
   - 상품 크기가 L인 경우: 다마스, 라보, 1톤 트럭 선택 가능

3. **상품 정보 입력**

   - 상품명, 수량, 상품 주의사항 입력
   - 퀵 일반 상품이 디폴트 (선택 시 급송 가능)

4. **출발지 정보**

   - 차량 종류가 화물인 경우: [필수] 배송운반 필요여부 체크
   - [선택] 픽업시 요청 메모

5. **도착지 정보**

   - 차량 종류가 화물인 경우: [필수] 배송운반 필요여부 체크
   - [선택] 픽업시 요청 메모

6. **픽업 희망시간** 최종 업데이트 (현시간 기준 +15분)
7. **운송 금액 확인** 및 주의사항 확인
8. **운송 등록**

### 다. 사용자 인터페이스(UI/UX) 개선

#### 주문 프로세스 통합

- 기존에 분리되어 있던 '물품정보 입력' 페이지와 '부가정보' 페이지를 하나로 통합
- 주문 단계를 축소하고 사용자 편의성을 극대화
- 아코디언 형식으로 구성하되 수정이 원활하도록 설계

#### 직관적인 옵션 선택

- 사용자가 선택한 물품 크기에 따라 선택 가능한 차량이 자동으로 필터링
- 대형 선택 시 차량 선택을 UNSELECT 이벤트 발생
- 화물 차량 선택 시 상하차 옵션 활성화

#### 세부 UI 개선사항

- **물품명 입력**: INPUT박스 20자 제한, placeholder 추가
- **개수 삭제**: 강제 1 처리 (다른 물품이 여러개면 의미 없음)
- **예상운임 안내 삭제**
- **픽업/하차 시 기사님 확인사항**: input박스 40자 이내

### 라. 시스템 및 API 개발

#### 데이터베이스 확장

**1. 퀵 서비스 수수료 정책 관리 테이블 추가**

- **정책 적용 기간**: 시작일/종료일 정보
- **사용 횟수**: 지난 달 기준 퀵 서비스 사용 횟수
- **할인율 정보**: 카카오 할인율, 고객사 퀵 할인율
- **수수료율 정보**: 고객사 화물 이용료율
- **메타데이터**: 생성일자, 수정일자

**2. 퀵 주문 관리 테이블 확장**

- **기존**: 상하차 정보가 통합되어 관리
- **개선**:
  - 출발지 상차 방법 정보 분리: 고객직접/함께작업/기사담당
  - 도착지 하차 방법 정보 분리: 고객직접/함께작업/기사담당
  - 원가 정보 추가: 카카오 기준 원가 계산 로직 적용
  - 고객사 표시 금액 추가:
    - 오토바이: 원가 기준 할인율 적용
    - 화물차량: 총액 기준 수수료율 적용
  - 할인/수수료율 정보 추가

**3. 주소 정보 테이블 확장**

- 주소별 요청 메모 정보 추가 (선택 입력 필드)

#### API 기능 확장

- 퀵 주문 생성(`POST`), 조회(`GET`), 예상 가격 조회(`POST /check`) 등 핵심 API에 화물 운송 옵션 관련 파라미터 추가
- 서버 로직 고도화

---

## 4. 화면별 세부 개발 사항

### 가. 퀵 예약 내역 (대장 마켓플레이스)

- **DatePicker 디폴트 값**: 최근 1달 → 이번달로 변경
- **엑셀 다운로드**: DatePicker와 맞지 않는 버그 수정
- **검색어**: 현재 = 검색 → Like 검색으로 변경
- **페이지네이션**: 15 → 50단위로 변경
- **물품 정보**: 3줄 → 1줄 표기, 높이 조절
- **화면 너비 부족시**: 할인율/할인차감금액/이용료율/이용료금액/공급가액/부가세는 엑셀 다운로드에서만 표시

### 나. 퀵 예약 상세

- 예약 상세정보에 차량 종류 추가
- 화물인 경우 운임 정보 추가 수정
- 물품 정보는 예약 내역과 동일하게 처리

### 다. VONE 제휴점 관리 > 퀵대장 연결

- **상태필터**: 고객사 상태 (전체/활성/비활성)
- **검색필터**: 고객사명 or 고객사ID 검색
- **AG-GRID 컬럼**: 고객사ID, 고객사명, 고객사상태, 퀵 할인율, 화물 수수료율, 퀵 이용내역 이동, 저장하기

### 라. 식권대장 APP

- 식권대장 예약하기 Web View에서 퀵 예약하기 기능 제공

---

## 5. 퀵대장 사용 정책

### 가. 퀵 타입별 사용 여부

| 타입     | 사용여부 | 비고                 |
| :------- | :------- | :------------------- |
| 퀵 일반  | 사용     | -                    |
| 이코노미 | 미사용   | 미할인               |
| 급송     | 사용     | 사용자 메리트가 없음 |
| 도보     | 미사용   | 퀵 이용 범위 X       |

### 나. 차량 종류별 정책

| 타입            | 크기             | 사용여부 | 비고      |
| :-------------- | :--------------- | :------- | :-------- |
| 오토바이        | 초소형,소형,중형 | 사용     | -         |
| 짐받이 오토바이 | 초소형,소형,중형 | 미사용   | -         |
| 승용차          | 대형             | 미사용   | 법률 이슈 |
| 다마스          | 대형             | 사용     | -         |
| 라보            | 대형             | 사용     | -         |
| 1톤             | 대형             | 사용     | -         |

### 다. 왕복 여부

- 모든 차량 타입에서 왕복 기능은 **미사용**

### 라. 상하차 정보

- **초소형/소형/중형**: 상하차 선택 불가능 (미사용)
- **대형**: 상하차 선택 가능 (사용)

---

## 6. 관련 Jira 이슈

- **Epic**: `PROD-18945` - [퀵대장]차량(화물) 및 기타 옵션 추가 이슈
- **주요 하위 이슈**:
  - `PROD-18950`: [기획]화면설계
  - `PROD-18953`: [서버]퀵 주문 관련 테이블 수정
  - `PROD-18947`: [API]CaptainPayment/Quick 수정
  - `PROD-18948`: [식권대장앱]웹뷰 퀵대장 페이지 수정
  - `PROD-18949`: [CORP]퀵대장 페이지 수정

---

## 7. 요금 구성 및 표시 방식

### 가. 2025년 7월-2026년 2월 요금 정책

| 구분           | 퀵 노출항목             | 화물 노출항목            |
| :------------- | :---------------------- | :----------------------- |
| **카카오원가** | 퀵 운임료(카카오공급가) | 운임료(카카오공급가)\*8% |
| **할인금액**   | 운임료\*할인율(5%)      | -                        |
| **표시금액**   | -                       | 운임료(카카오공급가)     |
| **수수료**     | -                       | 운임료\*수수료율         |

### 나. 참조 링크

- Redash 쿼리: https://redash.sikdae.com/queries/1287
